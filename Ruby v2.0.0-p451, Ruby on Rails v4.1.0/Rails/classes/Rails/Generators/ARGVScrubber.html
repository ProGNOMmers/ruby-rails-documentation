<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Rails::Generators::ARGVScrubber</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../../../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../../css/github.css" type="text/css" media="screen" />
<script src="../../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
            <span>Ruby on Rails 4.1.0</span><br />
        
        <h1>
            <span class="type">Class</span> 
            Rails::Generators::ARGVScrubber 
            
                <span class="parent">&lt; 
                    
                    <a href="../../Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../../files/railties/lib/rails/generators/rails/app/app_generator_rb.html">railties/lib/rails/generators/rails/app/app_generator.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<p>This class handles preparation of the arguments before the AppGenerator is
called. The class provides version or help information if they were
requested, and also constructs the railsrc file (used for extra
configuration options).</p>

<p>This class should be called before the AppGenerator is required and started
since it configures and mutates ARGV correctly.</p>

    </div>
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>D</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-default_rc_file">default_rc_file</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>H</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-handle_invalid_command-21">handle_invalid_command!</a>,
              </li>
            
              
              <li>
                <a href="#method-i-handle_rails_rc-21">handle_rails_rc!</a>,
              </li>
            
              
              <li>
                <a href="#method-i-handle_version_request-21">handle_version_request!</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>I</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-insert_railsrc_into_argv-21">insert_railsrc_into_argv!</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>N</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-new">new</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>P</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-prepare-21">prepare!</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>R</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-railsrc">railsrc</a>,
              </li>
            
              
              <li>
                <a href="#method-i-read_rc_file">read_rc_file</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    


    


    <!-- Methods -->
    
      <div class="sectiontitle">Class Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-c-default_rc_file">
            
              <b>default_rc_file</b>()
            
            <a href="../../../classes/Rails/Generators/ARGVScrubber.html#method-c-default_rc_file" name="method-c-default_rc_file" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-default_rc_file_source')" id="l_method-c-default_rc_file_source">show</a>
                
                  | <a href="https://github.com/mdesantis/rails/blob/22a1a5ac8c4631f29cfeac451c361e8da1dd2261/railties/lib/rails/generators/rails/app/app_generator.rb#L328" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-default_rc_file_source" class="dyn-source">
                <pre><span class="ruby-comment"># File railties/lib/rails/generators/rails/app/app_generator.rb, line 328</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">self</span>.<span class="ruby-identifier">default_rc_file</span>
  <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-string">&#39;~/.railsrc&#39;</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-new">
            
              <b>new</b>(argv = ARGV)
            
            <a href="../../../classes/Rails/Generators/ARGVScrubber.html#method-c-new" name="method-c-new" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-new_source')" id="l_method-c-new_source">show</a>
                
                  | <a href="https://github.com/mdesantis/rails/blob/22a1a5ac8c4631f29cfeac451c361e8da1dd2261/railties/lib/rails/generators/rails/app/app_generator.rb#L317" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-new_source" class="dyn-source">
                <pre><span class="ruby-comment"># File railties/lib/rails/generators/rails/app/app_generator.rb, line 317</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">initialize</span>(<span class="ruby-identifier">argv</span> = <span class="ruby-constant">ARGV</span>)
  <span class="ruby-ivar">@argv</span> = <span class="ruby-identifier">argv</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                  
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-prepare-21">
            
              <b>prepare!</b>()
            
            <a href="../../../classes/Rails/Generators/ARGVScrubber.html#method-i-prepare-21" name="method-i-prepare-21" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-prepare-21_source')" id="l_method-i-prepare-21_source">show</a>
                
                  | <a href="https://github.com/mdesantis/rails/blob/22a1a5ac8c4631f29cfeac451c361e8da1dd2261/railties/lib/rails/generators/rails/app/app_generator.rb#L321" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-prepare-21_source" class="dyn-source">
                <pre><span class="ruby-comment"># File railties/lib/rails/generators/rails/app/app_generator.rb, line 321</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">prepare!</span>
  <span class="ruby-identifier">handle_version_request!</span>(<span class="ruby-ivar">@argv</span>.<span class="ruby-identifier">first</span>)
  <span class="ruby-identifier">handle_invalid_command!</span>(<span class="ruby-ivar">@argv</span>.<span class="ruby-identifier">first</span>, <span class="ruby-ivar">@argv</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">handle_rails_rc!</span>(<span class="ruby-ivar">@argv</span>.<span class="ruby-identifier">drop</span>(<span class="ruby-number">1</span>))
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
              
      <div class="sectiontitle">Instance Private methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-handle_invalid_command-21">
            
              <b>handle_invalid_command!</b>(argument, argv)
            
            <a href="../../../classes/Rails/Generators/ARGVScrubber.html#method-i-handle_invalid_command-21" name="method-i-handle_invalid_command-21" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-handle_invalid_command-21_source')" id="l_method-i-handle_invalid_command-21_source">show</a>
                
                  | <a href="https://github.com/mdesantis/rails/blob/22a1a5ac8c4631f29cfeac451c361e8da1dd2261/railties/lib/rails/generators/rails/app/app_generator.rb#L342" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-handle_invalid_command-21_source" class="dyn-source">
                <pre><span class="ruby-comment"># File railties/lib/rails/generators/rails/app/app_generator.rb, line 342</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">handle_invalid_command!</span>(<span class="ruby-identifier">argument</span>, <span class="ruby-identifier">argv</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">argument</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;new&quot;</span>
    <span class="ruby-keyword">yield</span>
  <span class="ruby-keyword">else</span>
    [<span class="ruby-string">&#39;--help&#39;</span>] <span class="ruby-operator">+</span> <span class="ruby-identifier">argv</span>.<span class="ruby-identifier">drop</span>(<span class="ruby-number">1</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-handle_rails_rc-21">
            
              <b>handle_rails_rc!</b>(argv)
            
            <a href="../../../classes/Rails/Generators/ARGVScrubber.html#method-i-handle_rails_rc-21" name="method-i-handle_rails_rc-21" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-handle_rails_rc-21_source')" id="l_method-i-handle_rails_rc-21_source">show</a>
                
                  | <a href="https://github.com/mdesantis/rails/blob/22a1a5ac8c4631f29cfeac451c361e8da1dd2261/railties/lib/rails/generators/rails/app/app_generator.rb#L350" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-handle_rails_rc-21_source" class="dyn-source">
                <pre><span class="ruby-comment"># File railties/lib/rails/generators/rails/app/app_generator.rb, line 350</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">handle_rails_rc!</span>(<span class="ruby-identifier">argv</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">argv</span>.<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">arg</span><span class="ruby-operator">|</span> <span class="ruby-identifier">arg</span> <span class="ruby-operator">==</span> <span class="ruby-string">&#39;--no-rc&#39;</span> }
    <span class="ruby-identifier">argv</span>.<span class="ruby-identifier">reject</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">arg</span><span class="ruby-operator">|</span> <span class="ruby-identifier">arg</span> <span class="ruby-operator">==</span> <span class="ruby-string">&#39;--no-rc&#39;</span> }
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">railsrc</span>(<span class="ruby-identifier">argv</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">rc_argv</span>, <span class="ruby-identifier">rc</span><span class="ruby-operator">|</span> <span class="ruby-identifier">insert_railsrc_into_argv!</span>(<span class="ruby-identifier">rc_argv</span>, <span class="ruby-identifier">rc</span>) }
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-handle_version_request-21">
            
              <b>handle_version_request!</b>(argument)
            
            <a href="../../../classes/Rails/Generators/ARGVScrubber.html#method-i-handle_version_request-21" name="method-i-handle_version_request-21" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-handle_version_request-21_source')" id="l_method-i-handle_version_request-21_source">show</a>
                
                  | <a href="https://github.com/mdesantis/rails/blob/22a1a5ac8c4631f29cfeac451c361e8da1dd2261/railties/lib/rails/generators/rails/app/app_generator.rb#L334" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-handle_version_request-21_source" class="dyn-source">
                <pre><span class="ruby-comment"># File railties/lib/rails/generators/rails/app/app_generator.rb, line 334</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">handle_version_request!</span>(<span class="ruby-identifier">argument</span>)
  <span class="ruby-keyword">if</span> [<span class="ruby-string">&#39;--version&#39;</span>, <span class="ruby-string">&#39;-v&#39;</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">argument</span>)
    <span class="ruby-identifier">require</span> <span class="ruby-string">&#39;rails/version&#39;</span>
    <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Rails #{Rails::VERSION::STRING}&quot;</span>
    <span class="ruby-identifier">exit</span>(<span class="ruby-number">0</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-insert_railsrc_into_argv-21">
            
              <b>insert_railsrc_into_argv!</b>(argv, railsrc)
            
            <a href="../../../classes/Rails/Generators/ARGVScrubber.html#method-i-insert_railsrc_into_argv-21" name="method-i-insert_railsrc_into_argv-21" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-insert_railsrc_into_argv-21_source')" id="l_method-i-insert_railsrc_into_argv-21_source">show</a>
                
                  | <a href="https://github.com/mdesantis/rails/blob/22a1a5ac8c4631f29cfeac451c361e8da1dd2261/railties/lib/rails/generators/rails/app/app_generator.rb#L373" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-insert_railsrc_into_argv-21_source" class="dyn-source">
                <pre><span class="ruby-comment"># File railties/lib/rails/generators/rails/app/app_generator.rb, line 373</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">insert_railsrc_into_argv!</span>(<span class="ruby-identifier">argv</span>, <span class="ruby-identifier">railsrc</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">argv</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">railsrc</span>)
  <span class="ruby-identifier">extra_args</span> = <span class="ruby-identifier">read_rc_file</span> <span class="ruby-identifier">railsrc</span>
  <span class="ruby-identifier">argv</span>.<span class="ruby-identifier">take</span>(<span class="ruby-number">1</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">extra_args</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">argv</span>.<span class="ruby-identifier">drop</span>(<span class="ruby-number">1</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-railsrc">
            
              <b>railsrc</b>(argv)
            
            <a href="../../../classes/Rails/Generators/ARGVScrubber.html#method-i-railsrc" name="method-i-railsrc" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-railsrc_source')" id="l_method-i-railsrc_source">show</a>
                
                  | <a href="https://github.com/mdesantis/rails/blob/22a1a5ac8c4631f29cfeac451c361e8da1dd2261/railties/lib/rails/generators/rails/app/app_generator.rb#L358" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-railsrc_source" class="dyn-source">
                <pre><span class="ruby-comment"># File railties/lib/rails/generators/rails/app/app_generator.rb, line 358</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">railsrc</span>(<span class="ruby-identifier">argv</span>)
  <span class="ruby-keyword">if</span> (<span class="ruby-identifier">customrc</span> = <span class="ruby-identifier">argv</span>.<span class="ruby-identifier">index</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">&quot;--rc=&quot;</span>) })
    <span class="ruby-identifier">fname</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">argv</span>[<span class="ruby-identifier">customrc</span>].<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/--rc=/</span>, <span class="ruby-string">&quot;&quot;</span>))
    <span class="ruby-keyword">yield</span>(<span class="ruby-identifier">argv</span>.<span class="ruby-identifier">take</span>(<span class="ruby-identifier">customrc</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">argv</span>.<span class="ruby-identifier">drop</span>(<span class="ruby-identifier">customrc</span> <span class="ruby-operator">+</span> <span class="ruby-number">1</span>), <span class="ruby-identifier">fname</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">yield</span> <span class="ruby-identifier">argv</span>, <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">default_rc_file</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-read_rc_file">
            
              <b>read_rc_file</b>(railsrc)
            
            <a href="../../../classes/Rails/Generators/ARGVScrubber.html#method-i-read_rc_file" name="method-i-read_rc_file" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-read_rc_file_source')" id="l_method-i-read_rc_file_source">show</a>
                
                  | <a href="https://github.com/mdesantis/rails/blob/22a1a5ac8c4631f29cfeac451c361e8da1dd2261/railties/lib/rails/generators/rails/app/app_generator.rb#L367" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-read_rc_file_source" class="dyn-source">
                <pre><span class="ruby-comment"># File railties/lib/rails/generators/rails/app/app_generator.rb, line 367</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">read_rc_file</span>(<span class="ruby-identifier">railsrc</span>)
  <span class="ruby-identifier">extra_args</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">readlines</span>(<span class="ruby-identifier">railsrc</span>).<span class="ruby-identifier">flat_map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-value">:split</span>)
  <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Using #{extra_args.join(&quot; &quot;)} from #{railsrc}&quot;</span>
  <span class="ruby-identifier">extra_args</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                    </div>

    </div>
  </body>
</html>    