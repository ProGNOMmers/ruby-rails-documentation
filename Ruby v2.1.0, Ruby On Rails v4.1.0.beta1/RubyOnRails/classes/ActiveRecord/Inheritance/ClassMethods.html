<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>ActiveRecord::Inheritance::ClassMethods</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../../../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../../css/github.css" type="text/css" media="screen" />
<script src="../../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../../../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
            <span>Ruby on Rails 4.1.0.beta1</span><br />
        
        <h1>
            <span class="type">Module</span> 
            ActiveRecord::Inheritance::ClassMethods 
            
        </h1>
        <ul class="files">
            
            <li><a href="../../../files/activerecord/lib/active_record/inheritance_rb.html">activerecord/lib/active_record/inheritance.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  


  


  
  


  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>A</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-abstract_class-3F">abstract_class?</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>B</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-base_class">base_class</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>C</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-compute_type">compute_type</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>D</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-descends_from_active_record-3F">descends_from_active_record?</a>,
              </li>
            
              
              <li>
                <a href="#method-i-discriminate_class_for_record">discriminate_class_for_record</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>F</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-find_sti_class">find_sti_class</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>N</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-new">new</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>S</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-sti_name">sti_name</a>,
              </li>
            
              
              <li>
                <a href="#method-i-subclass_from_attrs">subclass_from_attrs</a>,
              </li>
            
              
              <li>
                <a href="#method-i-symbolized_base_class">symbolized_base_class</a>,
              </li>
            
              
              <li>
                <a href="#method-i-symbolized_sti_name">symbolized_sti_name</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>T</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-type_condition">type_condition</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>U</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-using_single_table_inheritance-3F">using_single_table_inheritance?</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  



  

    

    

    


    
      <!-- Section attributes -->
      <div class="sectiontitle">Attributes</div>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [RW]
            </td>
            <td class='attr-name'>abstract_class</td>
            <td class='attr-desc'><p>Set this to true if this is an abstract class (see
<code>abstract_class?</code>). If you are using inheritance with
ActiveRecord and don&#39;t want child classes to utilize the implied STI
table name of the parent class, this will need to be true. For example,
given the following:</p>

<pre><code>class SuperClass &lt; ActiveRecord::Base
  self.abstract_class = true
end
class Child &lt; SuperClass
  self.table_name = &#39;the_table_i_really_want&#39;
end
</code></pre>

<p><code>self.abstract_class = true</code> is required to make
<code>Child&lt;.find,.create, or any Arel method&gt;</code> use
<code>the_table_i_really_want</code> instead of a table called
<code>super_classes</code></p></td>
          </tr>
        
      </table>
    


    <!-- Methods -->
        
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-abstract_class-3F">
            
              <b>abstract_class?</b>()
            
            <a href="../../../classes/ActiveRecord/Inheritance/ClassMethods.html#method-i-abstract_class-3F" name="method-i-abstract_class-3F" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Returns whether this class is an abstract class or not.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-abstract_class-3F_source')" id="l_method-i-abstract_class-3F_source">show</a>
                
                  | <a href="https://github.com/mdesantis/rails/blob/729d3c05998ecd9e18e4d1e83cd14e5b609bd7f5/activerecord/lib/active_record/inheritance.rb#L93" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-abstract_class-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/inheritance.rb, line 93</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">abstract_class?</span>
  <span class="ruby-keyword">defined?</span>(<span class="ruby-ivar">@abstract_class</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@abstract_class</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-base_class">
            
              <b>base_class</b>()
            
            <a href="../../../classes/ActiveRecord/Inheritance/ClassMethods.html#method-i-base_class" name="method-i-base_class" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Returns the class descending directly from <a
href="../Base.html">ActiveRecord::Base</a>, or an abstract class, if any,
in the inheritance hierarchy.</p>

<p>If A extends AR::Base, A.base_class will return A. If B descends from A
through some arbitrarily deep hierarchy, B.base_class will return A.</p>

<p>If B &lt; A and C &lt; B and if A is an <a
href="ClassMethods.html#attribute-i-abstract_class">#abstract_class</a>
then both B.base_class and C.base_class would return B as the answer since
A is an abstract_class.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-base_class_source')" id="l_method-i-base_class_source">show</a>
                
                  | <a href="https://github.com/mdesantis/rails/blob/729d3c05998ecd9e18e4d1e83cd14e5b609bd7f5/activerecord/lib/active_record/inheritance.rb#L63" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-base_class_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/inheritance.rb, line 63</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">base_class</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-keyword">self</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Base</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">ActiveRecordError</span>, <span class="ruby-node">&quot;#{name} doesn&#39;t belong in a hierarchy descending from ActiveRecord&quot;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">superclass</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Base</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">abstract_class?</span>
    <span class="ruby-keyword">self</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">base_class</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-descends_from_active_record-3F">
            
              <b>descends_from_active_record?</b>()
            
            <a href="../../../classes/ActiveRecord/Inheritance/ClassMethods.html#method-i-descends_from_active_record-3F" name="method-i-descends_from_active_record-3F" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Returns <code>true</code> if this does not need STI type condition. Returns
<code>false</code> if STI type condition needs to be applied.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-descends_from_active_record-3F_source')" id="l_method-i-descends_from_active_record-3F_source">show</a>
                
                  | <a href="https://github.com/mdesantis/rails/blob/729d3c05998ecd9e18e4d1e83cd14e5b609bd7f5/activerecord/lib/active_record/inheritance.rb#L32" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-descends_from_active_record-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/inheritance.rb, line 32</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">descends_from_active_record?</span>
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Base</span>
    <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">abstract_class?</span>
    <span class="ruby-identifier">superclass</span>.<span class="ruby-identifier">descends_from_active_record?</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">superclass</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Base</span> <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-identifier">columns_hash</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">inheritance_column</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-new">
            
              <b>new</b>(*args, &amp;block)
            
            <a href="../../../classes/ActiveRecord/Inheritance/ClassMethods.html#method-i-new" name="method-i-new" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Determines if one of the attributes passed in is the inheritance column,
and if the inheritance column is attr accessible, it initializes an
instance of the given subclass instead of the base class.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-new_source')" id="l_method-i-new_source">show</a>
                
                  | <a href="https://github.com/mdesantis/rails/blob/729d3c05998ecd9e18e4d1e83cd14e5b609bd7f5/activerecord/lib/active_record/inheritance.rb#L17" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-new_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/inheritance.rb, line 17</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">new</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">abstract_class?</span> <span class="ruby-operator">||</span> <span class="ruby-keyword">self</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Base</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>, <span class="ruby-node">&quot;#{self} is an abstract class and can not be instantiated.&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> (<span class="ruby-identifier">attrs</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">first</span>).<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">subclass</span> = <span class="ruby-identifier">subclass_from_attrs</span>(<span class="ruby-identifier">attrs</span>)
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">subclass</span>.<span class="ruby-identifier">new</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment"># Delegate to the original .new</span>
  <span class="ruby-keyword">super</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-sti_name">
            
              <b>sti_name</b>()
            
            <a href="../../../classes/ActiveRecord/Inheritance/ClassMethods.html#method-i-sti_name" name="method-i-sti_name" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-sti_name_source')" id="l_method-i-sti_name_source">show</a>
                
                  | <a href="https://github.com/mdesantis/rails/blob/729d3c05998ecd9e18e4d1e83cd14e5b609bd7f5/activerecord/lib/active_record/inheritance.rb#L97" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-sti_name_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/inheritance.rb, line 97</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">sti_name</span>
  <span class="ruby-identifier">store_full_sti_class</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">name</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">demodulize</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-symbolized_base_class">
            
              <b>symbolized_base_class</b>()
            
            <a href="../../../classes/ActiveRecord/Inheritance/ClassMethods.html#method-i-symbolized_base_class" name="method-i-symbolized_base_class" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-symbolized_base_class_source')" id="l_method-i-symbolized_base_class_source">show</a>
                
                  | <a href="https://github.com/mdesantis/rails/blob/729d3c05998ecd9e18e4d1e83cd14e5b609bd7f5/activerecord/lib/active_record/inheritance.rb#L47" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-symbolized_base_class_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/inheritance.rb, line 47</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">symbolized_base_class</span>
  <span class="ruby-ivar">@symbolized_base_class</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">base_class</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">to_sym</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-symbolized_sti_name">
            
              <b>symbolized_sti_name</b>()
            
            <a href="../../../classes/ActiveRecord/Inheritance/ClassMethods.html#method-i-symbolized_sti_name" name="method-i-symbolized_sti_name" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-symbolized_sti_name_source')" id="l_method-i-symbolized_sti_name_source">show</a>
                
                  | <a href="https://github.com/mdesantis/rails/blob/729d3c05998ecd9e18e4d1e83cd14e5b609bd7f5/activerecord/lib/active_record/inheritance.rb#L51" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-symbolized_sti_name_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/inheritance.rb, line 51</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">symbolized_sti_name</span>
  <span class="ruby-ivar">@symbolized_sti_name</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">sti_name</span>.<span class="ruby-identifier">present?</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">sti_name</span>.<span class="ruby-identifier">to_sym</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">symbolized_base_class</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
              
      <div class="sectiontitle">Instance Protected methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-compute_type">
            
              <b>compute_type</b>(type_name)
            
            <a href="../../../classes/ActiveRecord/Inheritance/ClassMethods.html#method-i-compute_type" name="method-i-compute_type" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Returns the class type of the record using the current module as a prefix.
So descendants of MyApp::Business::Account would appear as
MyApp::Business::AccountSubclass.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-compute_type_source')" id="l_method-i-compute_type_source">show</a>
                
                  | <a href="https://github.com/mdesantis/rails/blob/729d3c05998ecd9e18e4d1e83cd14e5b609bd7f5/activerecord/lib/active_record/inheritance.rb#L105" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-compute_type_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/inheritance.rb, line 105</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">compute_type</span>(<span class="ruby-identifier">type_name</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">type_name</span>.<span class="ruby-identifier">match</span>(<span class="ruby-regexp">/^::/</span>)
    <span class="ruby-comment"># If the type is prefixed with a scope operator then we assume that</span>
    <span class="ruby-comment"># the type_name is an absolute reference.</span>
    <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">constantize</span>(<span class="ruby-identifier">type_name</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-comment"># Build a list of candidates to search for</span>
    <span class="ruby-identifier">candidates</span> = []
    <span class="ruby-identifier">name</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp">/::|$/</span>) { <span class="ruby-identifier">candidates</span>.<span class="ruby-identifier">unshift</span> <span class="ruby-node">&quot;#{$`}::#{type_name}&quot;</span> }
    <span class="ruby-identifier">candidates</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">type_name</span>

    <span class="ruby-identifier">candidates</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">candidate</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">begin</span>
        <span class="ruby-identifier">constant</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">constantize</span>(<span class="ruby-identifier">candidate</span>)
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">constant</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">candidate</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">constant</span>.<span class="ruby-identifier">to_s</span>
      <span class="ruby-comment"># We don&#39;t want to swallow NoMethodError &lt; NameError errors</span>
      <span class="ruby-keyword">rescue</span> <span class="ruby-constant">NoMethodError</span>
        <span class="ruby-identifier">raise</span>
      <span class="ruby-keyword">rescue</span> <span class="ruby-constant">NameError</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">raise</span> <span class="ruby-constant">NameError</span>, <span class="ruby-node">&quot;uninitialized constant #{candidates.first}&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
              
      <div class="sectiontitle">Instance Private methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-discriminate_class_for_record">
            
              <b>discriminate_class_for_record</b>(record)
            
            <a href="../../../classes/ActiveRecord/Inheritance/ClassMethods.html#method-i-discriminate_class_for_record" name="method-i-discriminate_class_for_record" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Called by <code>instantiate</code> to decide which class to use for a new
record instance. For single-table inheritance, we check the record for a
<code>type</code> column and return the corresponding class.</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-discriminate_class_for_record_source')" id="l_method-i-discriminate_class_for_record_source">show</a>
                
                  | <a href="https://github.com/mdesantis/rails/blob/729d3c05998ecd9e18e4d1e83cd14e5b609bd7f5/activerecord/lib/active_record/inheritance.rb#L136" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-discriminate_class_for_record_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/inheritance.rb, line 136</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">discriminate_class_for_record</span>(<span class="ruby-identifier">record</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">using_single_table_inheritance?</span>(<span class="ruby-identifier">record</span>)
    <span class="ruby-identifier">find_sti_class</span>(<span class="ruby-identifier">record</span>[<span class="ruby-identifier">inheritance_column</span>])
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">super</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-find_sti_class">
            
              <b>find_sti_class</b>(type_name)
            
            <a href="../../../classes/ActiveRecord/Inheritance/ClassMethods.html#method-i-find_sti_class" name="method-i-find_sti_class" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-find_sti_class_source')" id="l_method-i-find_sti_class_source">show</a>
                
                  | <a href="https://github.com/mdesantis/rails/blob/729d3c05998ecd9e18e4d1e83cd14e5b609bd7f5/activerecord/lib/active_record/inheritance.rb#L148" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-find_sti_class_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/inheritance.rb, line 148</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">find_sti_class</span>(<span class="ruby-identifier">type_name</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">store_full_sti_class</span>
    <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">constantize</span>(<span class="ruby-identifier">type_name</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">compute_type</span>(<span class="ruby-identifier">type_name</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">NameError</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">SubclassNotFound</span>,
    <span class="ruby-node">&quot;The single-table inheritance mechanism failed to locate the subclass: &#39;#{type_name}&#39;. &quot;</span> <span class="ruby-operator">+</span>
    <span class="ruby-node">&quot;This error is raised because the column &#39;#{inheritance_column}&#39; is reserved for storing the class in case of inheritance. &quot;</span> <span class="ruby-operator">+</span>
    <span class="ruby-string">&quot;Please rename this column if you didn&#39;t intend it to be used for storing the inheritance class &quot;</span> <span class="ruby-operator">+</span>
    <span class="ruby-node">&quot;or overwrite #{name}.inheritance_column to use another column for that information.&quot;</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-subclass_from_attrs">
            
              <b>subclass_from_attrs</b>(attrs)
            
            <a href="../../../classes/ActiveRecord/Inheritance/ClassMethods.html#method-i-subclass_from_attrs" name="method-i-subclass_from_attrs" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>Detect the subclass from the inheritance column of attrs. If the
inheritance column value is not self or a valid subclass, raises
ActiveRecord::SubclassNotFound If this is a StrongParameters hash, and
access to inheritance_column is not permitted, this will ignore the
inheritance column and return nil</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-subclass_from_attrs_source')" id="l_method-i-subclass_from_attrs_source">show</a>
                
                  | <a href="https://github.com/mdesantis/rails/blob/729d3c05998ecd9e18e4d1e83cd14e5b609bd7f5/activerecord/lib/active_record/inheritance.rb#L173" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-subclass_from_attrs_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/inheritance.rb, line 173</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">subclass_from_attrs</span>(<span class="ruby-identifier">attrs</span>)
  <span class="ruby-identifier">subclass_name</span> = <span class="ruby-identifier">attrs</span>.<span class="ruby-identifier">with_indifferent_access</span>[<span class="ruby-identifier">inheritance_column</span>]

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">subclass_name</span>.<span class="ruby-identifier">present?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">subclass_name</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">name</span>
    <span class="ruby-identifier">subclass</span> = <span class="ruby-identifier">subclass_name</span>.<span class="ruby-identifier">safe_constantize</span>

    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">descendants</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">subclass</span>)
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">SubclassNotFound</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;Invalid single-table inheritance type: #{subclass_name} is not a subclass of #{name}&quot;</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">subclass</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-type_condition">
            
              <b>type_condition</b>(table = arel_table)
            
            <a href="../../../classes/ActiveRecord/Inheritance/ClassMethods.html#method-i-type_condition" name="method-i-type_condition" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-type_condition_source')" id="l_method-i-type_condition_source">show</a>
                
                  | <a href="https://github.com/mdesantis/rails/blob/729d3c05998ecd9e18e4d1e83cd14e5b609bd7f5/activerecord/lib/active_record/inheritance.rb#L162" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-type_condition_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/inheritance.rb, line 162</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">type_condition</span>(<span class="ruby-identifier">table</span> = <span class="ruby-identifier">arel_table</span>)
  <span class="ruby-identifier">sti_column</span> = <span class="ruby-identifier">table</span>[<span class="ruby-identifier">inheritance_column</span>]
  <span class="ruby-identifier">sti_names</span>  = ([<span class="ruby-keyword">self</span>] <span class="ruby-operator">+</span> <span class="ruby-identifier">descendants</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">model</span><span class="ruby-operator">|</span> <span class="ruby-identifier">model</span>.<span class="ruby-identifier">sti_name</span> }

  <span class="ruby-identifier">sti_column</span>.<span class="ruby-identifier">in</span>(<span class="ruby-identifier">sti_names</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-using_single_table_inheritance-3F">
            
              <b>using_single_table_inheritance?</b>(record)
            
            <a href="../../../classes/ActiveRecord/Inheritance/ClassMethods.html#method-i-using_single_table_inheritance-3F" name="method-i-using_single_table_inheritance-3F" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-using_single_table_inheritance-3F_source')" id="l_method-i-using_single_table_inheritance-3F_source">show</a>
                
                  | <a href="https://github.com/mdesantis/rails/blob/729d3c05998ecd9e18e4d1e83cd14e5b609bd7f5/activerecord/lib/active_record/inheritance.rb#L144" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-using_single_table_inheritance-3F_source" class="dyn-source">
                <pre><span class="ruby-comment"># File activerecord/lib/active_record/inheritance.rb, line 144</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">using_single_table_inheritance?</span>(<span class="ruby-identifier">record</span>)
  <span class="ruby-identifier">record</span>[<span class="ruby-identifier">inheritance_column</span>].<span class="ruby-identifier">present?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">columns_hash</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">inheritance_column</span>)
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                    </div>

    </div>
  </body>
</html>    