<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>ActionView::Base</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
<link rel="stylesheet" href="../../css/github.css" type="text/css" media="screen" />
<script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>

</head>

<body>     
    <div class="banner">
        
            <span>Ruby on Rails 3.0.20</span><br />
        
        <h1>
            <span class="type">Class</span> 
            ActionView::Base 
            
                <span class="parent">&lt; 
                    
                    <a href="../Object.html">Object</a>
                    
                </span>
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/actionpack/lib/action_view/base_rb.html">actionpack/lib/action_view/base.rb</a></li>
            
            <li><a href="../../files/actionpack/lib/action_view/helpers/form_helper_rb.html">actionpack/lib/action_view/helpers/form_helper.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
  
    <div class="description">
      
<h1 id="class-ActionView::Base-label-Action+View+Base">Action View <a href="Base.html">Base</a></h1>

<p>Action View templates can be written in three ways. If the template file
has a <code>.erb</code> (or <code>.rhtml</code>) extension then it uses a
mixture of ERb (included in Ruby) and <a href="../HTML.html">HTML</a>. If
the template file has a <code>.builder</code> (or <code>.rxml</code>)
extension then Jim Weirich&#39;s Builder::XmlMarkup library is used. If the
template file has a <code>.rjs</code> extension then it will use <a
href="Helpers/PrototypeHelper/JavaScriptGenerator.html">ActionView::Helpers::PrototypeHelper::JavaScriptGenerator</a>.</p>

<h2 id="class-ActionView::Base-label-ERb">ERb</h2>

<p>You trigger ERb by using embeddings such as &lt;% %&gt;, &lt;% -%&gt;, and
&lt;%= %&gt;. The &lt;%= %&gt; tag set is used when you want output.
Consider the following loop for names:</p>

<pre><code>&lt;b&gt;Names of all the people&lt;/b&gt;
&lt;% for person in @people %&gt;
  Name: &lt;%= person.name %&gt;&lt;br/&gt;
&lt;% end %&gt;</code></pre>

<p>The loop is setup in regular embedding tags &lt;% %&gt; and the name is
written using the output embedding tag &lt;%= %&gt;. Note that this is not
just a usage suggestion. Regular output functions like print or puts
won&#39;t work with ERb templates. So this would be wrong:</p>

<pre><code>&lt;%# WRONG %&gt;
Hi, Mr. &lt;% puts &quot;Frodo&quot; %&gt;</code></pre>

<p>If you absolutely must write from within a function use
<code>concat</code>.</p>

<p>&lt;%- and -%&gt; suppress leading and trailing whitespace, including the
trailing newline, and can be used interchangeably with &lt;% and %&gt;.</p>

<h3 id="class-ActionView::Base-label-Using+sub+templates">Using sub templates</h3>

<p>Using sub templates allows you to sidestep tedious replication and extract
common display structures in shared templates. The classic example is the
use of a header and footer (even though the Action Pack-way would be to use
<a href="Layouts.html">Layouts</a>):</p>

<pre><code>&lt;%= render &quot;shared/header&quot; %&gt;
Something really specific and terrific
&lt;%= render &quot;shared/footer&quot; %&gt;</code></pre>

<p>As you see, we use the output embeddings for the render methods. The render
call itself will just return a string holding the result of the rendering.
The output embedding writes it to the current template.</p>

<p>But you don&#39;t have to restrict yourself to static includes. Templates
can share variables amongst themselves by using instance variables defined
using the regular embedding tags. Like this:</p>

<pre><code>&lt;% @page_title = &quot;A Wonderful Hello&quot; %&gt;
&lt;%= render &quot;shared/header&quot; %&gt;</code></pre>

<p>Now the header can pick up on the <code>@page_title</code> variable and use
it for outputting a title tag:</p>

<pre><code>&lt;title&gt;&lt;%= @page_title %&gt;&lt;/title&gt;</code></pre>

<h3 id="class-ActionView::Base-label-Passing+local+variables+to+sub+templates">Passing local variables to sub templates</h3>

<p>You can pass local variables to sub templates by using a hash with the
variable names as keys and the objects as values:</p>

<pre><code>&lt;%= render &quot;shared/header&quot;, { :headline =&gt; &quot;Welcome&quot;, :person =&gt; person } %&gt;</code></pre>

<p>These can now be accessed in <code>shared/header</code> with:</p>

<pre><code>Headline: &lt;%= headline %&gt;
First name: &lt;%= person.first_name %&gt;</code></pre>

<p>If you need to find out whether a certain local variable has been assigned
a value in a particular render call, you need to use the following pattern:</p>

<pre><code>&lt;% if local_assigns.has_key? :headline %&gt;
  Headline: &lt;%= headline %&gt;
&lt;% end %&gt;</code></pre>

<p>Testing using <code>defined? headline</code> will not work. This is an
implementation restriction.</p>

<h3 id="class-ActionView::Base-label-Template+caching"><a href="Template.html">Template</a> caching</h3>

<p>By default, Rails will compile each template to a method in order to render
it. When you alter a template, Rails will check the file&#39;s modification
time and recompile it in development mode.</p>

<h2 id="class-ActionView::Base-label-Builder">Builder</h2>

<p>Builder templates are a more programmatic alternative to ERb. They are
especially useful for generating XML content. An XmlMarkup object named
<code>xml</code> is automatically made available to templates with a
<code>.builder</code> extension.</p>

<p>Here are some basic examples:</p>

<pre><code>xml.em(&quot;emphasized&quot;)                              # =&gt; &lt;em&gt;emphasized&lt;/em&gt;
xml.em { xml.b(&quot;emph &amp; bold&quot;) }                   # =&gt; &lt;em&gt;&lt;b&gt;emph &amp;amp; bold&lt;/b&gt;&lt;/em&gt;
xml.a(&quot;A Link&quot;, &quot;href&quot;=&gt;&quot;http://onestepback.org&quot;) # =&gt; &lt;a href=&quot;http://onestepback.org&quot;&gt;A Link&lt;/a&gt;
xml.target(&quot;name&quot;=&gt;&quot;compile&quot;, &quot;option&quot;=&gt;&quot;fast&quot;)   # =&gt; &lt;target option=&quot;fast&quot; name=&quot;compile&quot;\&gt;
                                                  # NOTE: order of attributes is not specified.
</code></pre>

<p>Any method with a block will be treated as an XML markup tag with nested
markup in the block. For example, the following:</p>

<pre><code>xml.div {
  xml.h1(@person.name)
  xml.p(@person.bio)
}</code></pre>

<p>would produce something like:</p>

<pre><code>&lt;div&gt;
  &lt;h1&gt;David Heinemeier Hansson&lt;/h1&gt;
  &lt;p&gt;A product of Danish Design during the Winter of &#39;79...&lt;/p&gt;
&lt;/div&gt;</code></pre>

<p>A full-length RSS example actually used on Basecamp:</p>

<pre><code>xml.rss(&quot;version&quot; =&gt; &quot;2.0&quot;, &quot;xmlns:dc&quot; =&gt; &quot;http://purl.org/dc/elements/1.1/&quot;) do
  xml.channel do
    xml.title(@feed_title)
    xml.link(@url)
    xml.description &quot;Basecamp: Recent items&quot;
    xml.language &quot;en-us&quot;
    xml.ttl &quot;40&quot;

    for item in @recent_items
      xml.item do
        xml.title(item_title(item))
        xml.description(item_description(item)) if item_description(item)
        xml.pubDate(item_pubDate(item))
        xml.guid(@person.firm.account.url + @recent_items.url(item))
        xml.link(@person.firm.account.url + @recent_items.url(item))

        xml.tag!(&quot;dc:creator&quot;, item.author_name) if item_has_creator?(item)
      end
    end
  end
end
</code></pre>

<p>More builder documentation can be found at <a
href="http://builder.rubyforge.org">builder.rubyforge.org</a>.</p>

<h2 id="class-ActionView::Base-label-JavaScriptGenerator">JavaScriptGenerator</h2>

<p>JavaScriptGenerator templates end in <code>.rjs</code>. Unlike conventional
templates which are used to render the results of an action, these
templates generate instructions on how to modify an already rendered page.
This makes it easy to modify multiple elements on your page in one
declarative Ajax response. Actions with these templates are called in the
background with Ajax and make updates to the page where the request
originated from.</p>

<p>An instance of the JavaScriptGenerator object named <code>page</code> is
automatically made available to your template, which is implicitly wrapped
in an <a
href="Helpers/PrototypeHelper.html#method-i-update_page">ActionView::Helpers::PrototypeHelper#update_page</a>
block.</p>

<p>When an <code>.rjs</code> action is called with
<code>link_to_remote</code>, the generated JavaScript is automatically
evaluated.  Example:</p>

<pre><code>link_to_remote :url =&gt; {:action =&gt; &#39;delete&#39;}
</code></pre>

<p>The subsequently rendered <code>delete.rjs</code> might look like:</p>

<pre><code>page.replace_html  &#39;sidebar&#39;, :partial =&gt; &#39;sidebar&#39;
page.remove        &quot;person-#{@person.id}&quot;
page.visual_effect :highlight, &#39;user-list&#39;
</code></pre>

<p>This refreshes the sidebar, removes a person element and highlights the
user list.</p>

<p>See the <a
href="Helpers/PrototypeHelper/JavaScriptGenerator/GeneratorMethods.html">ActionView::Helpers::PrototypeHelper::JavaScriptGenerator::GeneratorMethods</a>
documentation for more details.</p>

    </div>
  


  


  
  


  
    <!-- Namespace -->
    <div class="sectiontitle">Namespace</div>
    <ul>
      
        <li>
          <span class="type">MODULE</span>
          <a href="Base/Subclasses.html">ActionView::Base::Subclasses</a>
        </li>
      
    </ul>
  


  
    <!-- Method ref -->
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
      
        <dt>C</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-controller_path">controller_path</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>D</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-debug_rjs-3D">debug_rjs=</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>P</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-c-process_view_paths">process_view_paths</a>
              </li>
            
          </ul>
        </dd>
      
        <dt>V</dt>
        <dd>
          <ul>
            
              
              <li>
                <a href="#method-i-view_context">view_context</a>
              </li>
            
          </ul>
        </dd>
      
    </dl>
  

  
    <!-- Includes -->
    <div class="sectiontitle">Included Modules</div>
    <ul>
      
        <li>
          
            <a href="Helpers.html">
              ActionView::Helpers
            </a>
          
        </li>
      
        <li>
          
            <a href="Rendering.html">
              ActionView::Rendering
            </a>
          
        </li>
      
        <li>
          
            <a href="Partials.html">
              ActionView::Partials
            </a>
          
        </li>
      
        <li>
          
            <a href="Layouts.html">
              ActionView::Layouts
            </a>
          
        </li>
      
        <li>
          
            <a href="../ERB/Util.html">
              ERB::Util
            </a>
          
        </li>
      
        <li>
          
            <a href="Context.html">
              ActionView::Context
            </a>
          
        </li>
      
    </ul>
  



  

    

    

    


    
      <!-- Section attributes -->
      <div class="sectiontitle">Attributes</div>
      <table border='0' cellpadding='5'>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [RW]
            </td>
            <td class='attr-name'>assigns</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [RW]
            </td>
            <td class='attr-name'>base_path</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [RW]
            </td>
            <td class='attr-name'>lookup_context</td>
            <td class='attr-desc'></td>
          </tr>
        
          <tr valign='top'>
            <td class='attr-rw'>
              [RW]
            </td>
            <td class='attr-name'>template_extension</td>
            <td class='attr-desc'></td>
          </tr>
        
      </table>
    


    <!-- Methods -->
    
      <div class="sectiontitle">Class Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-c-debug_rjs-3D">
            
              <b>debug_rjs=</b>(new_value)
            
            <a href="../../classes/ActionView/Base.html#method-c-debug_rjs-3D" name="method-c-debug_rjs-3D" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-debug_rjs-3D_source')" id="l_method-c-debug_rjs-3D_source">show</a>
                
                  | <a href="https://github.com/mdesantis/rails/blob/b03da2417b6d105b7e33367ab65f0fcd02cb3d13/actionpack/lib/action_view/base.rb#L170" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-debug_rjs-3D_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_view/base.rb, line 170</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">self</span>.<span class="ruby-identifier">debug_rjs=</span>(<span class="ruby-identifier">new_value</span>)
  <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Deprecation</span>.<span class="ruby-identifier">warn</span>(<span class="ruby-string">&quot;config.action_view.debug_rjs will be removed in 3.1, from 3.1 onwards you will need to install prototype-rails to continue to use RJS templates &quot;</span>)
  <span class="ruby-identifier">@@debug_rjs</span> = <span class="ruby-identifier">new_value</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-c-process_view_paths">
            
              <b>process_view_paths</b>(value)
            
            <a href="../../classes/ActionView/Base.html#method-c-process_view_paths" name="method-c-process_view_paths" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-c-process_view_paths_source')" id="l_method-c-process_view_paths_source">show</a>
                
                  | <a href="https://github.com/mdesantis/rails/blob/b03da2417b6d105b7e33367ab65f0fcd02cb3d13/actionpack/lib/action_view/base.rb#L207" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-c-process_view_paths_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_view/base.rb, line 207</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">self</span>.<span class="ruby-identifier">process_view_paths</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-identifier">value</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">PathSet</span>) <span class="ruby-operator">?</span>
    <span class="ruby-identifier">value</span>.<span class="ruby-identifier">dup</span> <span class="ruby-operator">:</span> <span class="ruby-constant">ActionView</span><span class="ruby-operator">::</span><span class="ruby-constant">PathSet</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Array</span>.<span class="ruby-identifier">wrap</span>(<span class="ruby-identifier">value</span>))
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                  
      <div class="sectiontitle">Instance Public methods</div>
      
        <div class="method">
          <div class="title method-title" id="method-i-controller_path">
            
              <b>controller_path</b>()
            
            <a href="../../classes/ActionView/Base.html#method-i-controller_path" name="method-i-controller_path" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-controller_path_source')" id="l_method-i-controller_path_source">show</a>
                
                  | <a href="https://github.com/mdesantis/rails/blob/b03da2417b6d105b7e33367ab65f0fcd02cb3d13/actionpack/lib/action_view/base.rb#L237" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-controller_path_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_view/base.rb, line 237</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">controller_path</span>
  <span class="ruby-ivar">@controller_path</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">controller</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">controller_path</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
        
        <div class="method">
          <div class="title method-title" id="method-i-view_context">
            
              <b>view_context</b>()
            
            <a href="../../classes/ActionView/Base.html#method-i-view_context" name="method-i-view_context" class="permalink">Link</a>
          </div>
          
          
            <div class="description">
              <p>TODO: HACK FOR RJS</p>
            </div>
          
          
          

          
          
          
            
            <div class="sourcecode">
              
              <p class="source-link">
                Source: 
                <a href="javascript:toggleSource('method-i-view_context_source')" id="l_method-i-view_context_source">show</a>
                
                  | <a href="https://github.com/mdesantis/rails/blob/b03da2417b6d105b7e33367ab65f0fcd02cb3d13/actionpack/lib/action_view/base.rb#L199" target="_blank" class="github_url">on GitHub</a>
                
              </p>
              <div id="method-i-view_context_source" class="dyn-source">
                <pre><span class="ruby-comment"># File actionpack/lib/action_view/base.rb, line 199</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword ruby-title">view_context</span>
  <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
              </div>
            </div>
            
          </div>
                    </div>

    </div>
  </body>
</html>    